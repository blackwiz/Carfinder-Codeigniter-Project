<?phpclass Inform_car extends Admin_Controller{        function __construct()    {        parent::__construct();		$this->load->library('form_validation');				$this->load->helper(array('form','url','codegen_helper'));		$this->load->model('inform_car_model');	}		    /*************************Start Function index()***********************************/    //Owner : Madhuranga Senadheera    //    //@ type :    //#return type :	function index()	{        // $this->load->model('inform_car_model');        $this->load->library('table');        $this->load->library('pagination');        //paging        $config['base_url'] = site_url('admin/inform_car/index');        $config['total_rows'] = $this->inform_car_model->count();        $config['per_page'] = 10;	        $this->pagination->initialize($config); 	        // make sure to put the primarykey first when selecting ,         //eg. 'userID,name as Name , lastname as Last_Name' , Name and Last_Name will be use as table header.        // Last_Name will be converted into Last Name using humanize() function, under inflector helper of the CI core.        $this->data['results'] = $this->inform_car_model->get_with_join('inform_car_id,inform_car.title,inform_car.first_name,town.name as town_name,inform_car.address_1 as from_,inform_car.m_tel,inform_car.request_date,inform_car.request_time,inform_car.status', NULL, FALSE,$config['per_page'],$this->uri->segment(4));        $this->data['meta_title'] = $this->data['meta_title'].' - Inform car list';        $this->data['sub_view'] = 'admin/inform_car_list';        $this->load->view('admin/_layout_main',$this->data); 	}//Function End get()---------------------------------------------------FUNEND() 	    /*************************Start Function add()***********************************/    //Owner : Madhuranga Senadheera    //    //@ type :    //#return type :    function add()    {            // load form vadaiton        $this->load->library('form_validation');    		$this->data['custom_error'] = '';        $this->form_validation->set_rules($this->inform_car_model->rules);        // validate form        if ($this->form_validation->run() == false)        {             $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);            if (!isset($_GET['website_booking_id'])) {                $this->data['result'] = array();            }            else{                $this->load->model('website_booking_model');                $user_data = $this->website_booking_model->get(array('title','first_name','last_name','town_id','address_1','address_2','m_tel','request_date','request_time','status'),trim($_GET['website_booking_id']),true,1,0,0,'array');                 $this->data['result'] = array('title'=>$user_data->title,'first_name'=>$user_data->first_name,'last_name'=>$user_data->last_name,'town_id'=>$user_data->town_id,'address_1'=>$user_data->address_1,'address_2'=>$user_data->address_2,'m_tel'=>$user_data->m_tel,'request_date'=>$user_data->request_date,'request_time'=>$user_data->request_time);              }        }        else        {                           // get form data                    $data = $this->post_get_as_array(array('title' ,'first_name' ,'last_name' ,'town_id' ,'address_1' ,'address_2' ,'m_tel' ,'request_date' ,'request_time' ,'admin_note' ,'status' ,'admin_id' ,'website_booking_id','driver_id' ));            // data save            if ($this->inform_car_model->save($data) == TRUE)            {                //$this->data['custom_error'] = '<div class="form_ok"><p>Added</p></div>';                // or redirect                redirect(site_url('admin/inform_car/index/?msg_success=Successfully details updated'));            }            else            {                $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured.</p></div>';			}        }        $this->data['meta_title'] = $this->data['meta_title'].' - Add a Inform car ';        $this->data['sub_view'] = 'admin/inform_car_add';        $this->load->view('admin/_layout_modal',$this->data);     }//Function End add()---------------------------------------------------FUNEND()        /*************************Start Function edit()***********************************/    //Owner : Madhuranga Senadheera    //    //@ type :    //#return type :    function edit($id1)    {           $ID = $id1;        // load form valition        $this->load->library('form_validation');            $this->data['custom_error'] = '';        // validate form        $this->form_validation->set_rules($this->inform_car_model->rules);        if ($this->form_validation->run() == false)        {            // set error massage             $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);             // $this->data['result'];        }        else        {                // get form data            $data = $this->post_get_as_array(array('title' ,'first_name' ,'last_name' ,'town_id' ,'address_1' ,'address_2' ,'m_tel' ,'request_date' ,'request_time' ,'admin_note' ,'status' ,'admin_id' ,'website_booking_id','driver_id'));            // data save                                  if ($this->inform_car_model->save($data, $this->input->post('inform_car_id')) == TRUE)            {                redirect(site_url('admin/inform_car/index/?msg_success=Successfully details updated'));            }            else            {                $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured</p></div>';            }        }        // load individula view        $this->data['result'] = $this->inform_car_model->get('inform_car_id,title,first_name,last_name,town_id,address_1,address_2,m_tel,request_date,request_time,admin_note,status,admin_id,website_booking_id,inform_car.driver_id', $ID,TRUE,1,0);        $this->data['meta_title'] = $this->data['meta_title'].' - Edit Inform car';        $this->data['sub_view'] = 'admin/inform_car_edit';        // load view        $this->load->view('admin/_layout_modal',$this->data);    }//Function End edit()---------------------------------------------------FUNEND()        /*************************Start Function view()***********************************/    //Owner : Madhuranga Senadheera    // View individual     //@ type :    //#return type :    function view($id1)    {        // $ID =  $this->uri->segment(3);        $ID = $id1;        //  get data        $this->data['result'] = $this->inform_car_model->get_with_join('inform_car_id,inform_car.title,inform_car.first_name,inform_car.last_name,inform_car.town_id,inform_car.address_1,inform_car.address_2,inform_car.m_tel,inform_car.request_date,inform_car.request_time,inform_car.admin_note,inform_car.status,inform_car.admin_id,inform_car.website_booking_id,town.name as town_name, admin.last_name as admin_name,inform_car.driver_id,driver.last_name as driver_name', $ID,TRUE,1,0);                $this->data['sub_view'] = 'admin/inform_car_view';        // load view        $this->load->view('admin/_layout_modal',$this->data);    }    /*************************Start Function delete()***********************************/    //Owner :                           Madhuranga Senadheera    //                                  status change      //@ type :    //#return type :    function delete($id)    {                          // status change                             if ($this->inform_car_model->save(array('d_status'=>'D'),$id) == TRUE)        {            redirect(site_url('admin/inform_car/index/?msg_success=Successfully details updated'));        }        else        {           redirect(site_url('admin/inform_car/index/?msg_error=Unsuccess full opertation'));        }    }//Function End delete()---------------------------------------------------FUNEND()            /**     * @author                          Madhuranga Senadheera     * Purpose of the function          Send a car when quick booking     * @return_type                          */    public function quick_booking_send_car($id)    {        $this->load->model('website_booking_model');        // load form valition        $this->load->library('form_validation');            $this->data['custom_error'] = '';        // validate form        $this->form_validation->set_rules($this->inform_car_model->rules);        if ($this->form_validation->run() == false)        {            // set error massage             $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);             // $this->data['result'];        }        else        {                // get form data            $data = $this->post_get_as_array(array('title' ,'first_name' ,'last_name' ,'town_id' ,'address_1' ,'address_2' ,'m_tel' ,'request_date' ,'request_time' ,'admin_note' ,'status' ,'admin_id' ,'website_booking_id'));            // data save                                  if ($this->inform_car_model->save($data, $this->input->post('inform_car_id')) == TRUE)            {                redirect(site_url('admin/inform_car/index/?msg_success=Successfully details updated'));            }            else            {                $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured</p></div>';            }        }        // get website booking details         $this->data['result'] = $this->website_booking_model->get('website_booking_id,title,first_name,last_name,address_1,address_2,town_id,m_tel,request_date,request_time,note,admin_note,email,status,user_verify,admin_id', $id,TRUE,1,0);        // load individula view        // $this->data['result'] = $this->inform_car_model->get('inform_car_id,title,first_name,last_name,town_id,address_1,address_2,m_tel,request_date,request_time,admin_note,status,admin_id,website_booking_id', $id,TRUE,1,0);        $this->data['meta_title'] = $this->data['meta_title'].' - Qick booking -> inform car';        $this->data['sub_view'] = 'admin/inform_car_quick_booking_send_car';        // load view        $this->load->view('admin/_layout_modal',$this->data);    }    /*---------------- ---------End of quick_booking_send_car()---------------------------*/         }/* End of file inform_car.php *//* Location: ./system/application/controllers/inform_car.php */