<?php/***** @copyright  2014* @license    None* @version    1.0* @link       None* @since      Class available since Release 1.0***/				/***********************************************************************************//*                                                                                 *//* File Name     : user.php                              *//* Purpose       : 													           *//*                 												                   *//*                                                                                 *//***********************************************************************************/class user extends Admin_Controller{	function __construct()	{		parent::__construct();                // lod model        $this->load->model('admin_model');	}	/**	 * @author                          Madhuranga Senadheera	 * Purpose of the function          Description	 * 	 */	public function index()	{	    	}	/*---------------- ---------End of index()---------------------------*/		/**     * @author                          Madhuranga Senadheera     * Purpose of the function          Description     */    public function registration()    {            }    /**     * @author                          Madhuranga Senadheera     * Purpose of the function          Description     *      */    public function login()    {                  // load form vadaiton        $this->load->library('form_validation');            $this->data['custom_error'] = '';        $this->form_validation->set_rules($this->admin_model->login_rules);        // validate form        if($this->form_validation->run()==false)        {              $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);             $this->data['result'] = array();            }        else        {             $this->admin_model->user_login($_POST['email'],$_POST['user_password']);         }        $this->data['meta_title'] = $this->data['meta_title'].' - Admin User login';        $this->load->view('admin/login_view',$this->data);    }    /*---------------- ---------End of login()---------------------------*/       function edit($id)    {                $this->load->library('form_validation');            $this->data['custom_error'] = '';        $this->form_validation->set_rules($this->driver_model->rules);        if ($this->form_validation->run() == false)        {             $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);         }        else        {                                        $data = $this->post_get_as_array(array('user_name','first_name','last_name','address_1','address_2','nic','licen_no','license_type','m_tel','h_tel','auth_code','status','password','new_password','dob','leave_date','new_password_requst_date','licen_expire_date','image'));                        if ($this->driver_model->save($data, $this->input->post('driver_id')) == TRUE)            {                redirect(site_url('admin/driver/index/?msg_success=Successfully details updated'));            }            else            {                $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured</p></div>';            }        }        $this->data['result'] = $this->driver_model->get('driver_id,user_name,first_name,last_name,address_1,address_2,nic,licen_no,license_type,m_tel,h_tel,auth_code,status,password,new_password,dob,leave_date,new_password_requst_date,licen_expire_date, image', $id,TRUE,1,0);        // echo    $this->db->last_query();        // exit();        $this->data['meta_title'] = $this->data['meta_title'].' - Edit Driver';        $this->data['sub_view'] = 'admin/driver_edit';        $this->load->view('admin/_layout_modal',$this->data);     }    /**     * @author                          Madhuranga Senadheera     * Purpose of the function          Description     *      */    public function forget_password()    {            }    /*---------------- ---------End of forget_password()---------------------------*/        /**     * @author                          Madhuranga Senadheera     * Purpose of the function          Description     *      */    public function reset_password()    {            }    /*---------------- ---------End of reset_password()---------------------------*/        /**     * @author                          Madhuranga Senadheera     * Purpose of the function          log out     *      */    public function logout()    {        $array_items = array(                            'user_id'           =>'',                            'user_name'         =>'',                            'user_type'         =>'',                            'first_name'        =>'',                            'last_name'         =>'',                            'user_email'        =>'',                            'user_profile_image'=>'',                            'loggedin'          =>'',                         );        $this->session->unset_userdata($array_items);        redirect('admin/user/login');    }    /*---------------- ---------End of logout()---------------------------*/         /**     * @author                          Madhuranga Senadheera     * Purpose of the function          User profile edit     *      */    function profile()    {                $this->load->library('form_validation');            $this->data['custom_error'] = '';        $this->form_validation->set_rules($this->admin_model->user_profile_rules);        if ($this->form_validation->run()==false)        {             $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);         }        else        {            $data = $this->post_get_as_array(array('town_id','first_name','last_name','email','mobile_no','adress_1','adress_street','user_password'));                        if ($this->admin_model->save($data, $this->input->post('driver_id')) == TRUE)            {                redirect(site_url('admin/dashboard/?msg_success=Successfully details updated'));            }            else            {                $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured</p></div>';            }        }        $this->data['result'] = $this->admin_model->get('admin_id,town_id,user_name,first_name,last_name,email,mobile_no,adress_1,adress_street,status,auth,user_password,user_type,image', $this->data['current_user_id'],TRUE,1,0);        // echo    $this->db->last_query();        // exit();        $this->data['meta_title'] = $this->data['meta_title'].' - Admin User profile';        $this->data['sub_view'] = 'admin/profile';        $this->load->view('admin/_layout_modal',$this->data);     }}/* End of file user.php *//* Location: ./application/controllers/user.php */ 